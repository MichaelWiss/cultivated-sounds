{% comment %}
  Renders product buy-buttons.
  Accepts:
  - product: {Object} product object.
  - block: {Object} passing the block information.
  - product_form_id: {String} product form id.
  - section_id: {String} id of section to which this snippet belongs.
  - show_pickup_availability: {Boolean} for the pickup availability. If true the pickup availability is rendered, false - not rendered (optional).

  Usage:
  {% render 'buy-buttons', block: block, product: product, product_form_id: product_form_id, section_id: section.id, show_pickup_availability: true %}
{% endcomment %}

<div {{ block.shopify_attributes }}>
  {%- if product != blank -%}
    {%- form 'product', product, id: product_form_id, class: 'form', novalidate: 'novalidate', data-type: 'add-to-cart-form' -%}
      <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}" disabled>
      
      <div class="flex flex-col gap-4">
        {%- if product.variants.size > 1 -%}
          <div class="flex flex-wrap gap-3 mb-4">
            {%- for variant in product.variants -%}
              <label class="cursor-pointer">
                <input 
                  type="radio" 
                  name="id" 
                  value="{{ variant.id }}" 
                  class="peer sr-only"
                  {% if product.selected_or_first_available_variant.id == variant.id %}checked{% endif %}
                  {% unless variant.available %}disabled{% endunless %}
                >
                <span class="block px-4 py-2 border border-vinyl-blue rounded-full font-mono text-xs uppercase tracking-wide peer-checked:bg-vinyl-blue peer-checked:text-white peer-disabled:opacity-50 peer-disabled:cursor-not-allowed hover:bg-vinyl-blue/10 transition-colors">
                  {{ variant.title }}
                </span>
              </label>
            {%- endfor -%}
          </div>
        {%- endif -%}

        <div class="flex gap-4 items-stretch">
          <div class="w-24 flex items-center border border-vinyl-blue rounded-full px-4">
            <button type="button" class="text-vinyl-blue hover:text-vinyl-black" name="minus" onclick="this.nextElementSibling.stepDown()">-</button>
            <input 
              type="number" 
              name="quantity" 
              value="1" 
              min="1" 
              class="w-full text-center bg-transparent border-none focus:ring-0 font-mono text-sm p-0"
            >
            <button type="button" class="text-vinyl-blue hover:text-vinyl-black" name="plus" onclick="this.previousElementSibling.stepUp()">+</button>
          </div>

          <button
            type="submit"
            name="add"
            class="flex-1 bg-vinyl-blue text-white font-mono text-sm uppercase tracking-widest py-4 rounded-full hover:bg-vinyl-black transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
            {% if product.selected_or_first_available_variant.available == false %}disabled{% endif %}
          >
            <span>
              {%- if product.selected_or_first_available_variant.available -%}
                {{ 'products.product.add_to_cart' | t }}
              {%- else -%}
                {{ 'products.product.sold_out' | t }}
              {%- endif -%}
            </span>
          </button>
        </div>
      </div>
    {%- endform -%}
  {%- endif -%}
</div>
