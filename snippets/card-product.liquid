{% comment %}
  Card Product Snippet
  - Ported from ProductCard.tsx
  - Uses Tailwind CSS
{% endcomment %}

<div class="group relative flex flex-col h-full bg-transparent transition-all duration-300 cursor-pointer border-r border-b border-vinyl-blue">
  <a href="{{ product.url }}" class="absolute inset-0 z-10">
    <span class="sr-only">View {{ product.title }}</span>
  </a>

  {% comment %} Image Container {% endcomment %}
  <div class="relative aspect-square w-full overflow-hidden border-b border-vinyl-blue">
    {% if product.featured_media %}
      <img 
        src="{{ product.featured_media | image_url: width: 800 }}" 
        alt="{{ product.featured_media.alt | escape }}" 
        width="{{ product.featured_media.width }}"
        height="{{ product.featured_media.height }}"
        loading="lazy"
        class="w-full h-full object-cover grayscale group-hover:grayscale-0 transition-all duration-700 ease-in-out"
      />
    {% else %}
      {{ 'product-1' | placeholder_svg_tag: 'w-full h-full object-cover grayscale' }}
    {% endif %}

    {% comment %} Badges {% endcomment %}
    <div class="absolute top-3 left-3 flex flex-col gap-2">
      {% unless product.available %}
        <span class="bg-vinyl-black text-white text-[9px] font-mono uppercase px-2 py-0.5 tracking-wider">
          Sold Out
        </span>
      {% endunless %}
      {% if product.tags contains 'New' and product.available %}
        <span class="bg-vinyl-blue text-white text-[9px] font-mono uppercase px-2 py-0.5 tracking-wider rounded-full">
          New
        </span>
      {% endif %}
    </div>
  </div>

  {% comment %} Details {% endcomment %}
  <div class="p-4 sm:p-5 flex flex-col flex-1 bg-vinyl-paper/50 group-hover:bg-white transition-colors duration-300">
    <div class="flex justify-between items-start mb-1">
      <div class="flex flex-col">
        <span class="font-sans text-[10px] uppercase tracking-[0.15em] text-gray-500 mb-1">{{ product.vendor }}</span>
        <h2 class="font-serif text-lg sm:text-xl leading-tight italic text-vinyl-black group-hover:text-vinyl-blue transition-colors">
          {{ product.title }}
        </h2>
      </div>
    </div>
    
    <div class="mt-auto flex justify-between items-end pt-4">
      <div class="flex flex-col">
        <span class="font-mono text-[9px] uppercase text-gray-400 tracking-widest">
          {{ product.type | default: 'Vinyl' }} / {{ product.metafields.my_fields.format | default: 'LP' }}
        </span>
      </div>
      <span class="font-mono text-sm font-bold text-vinyl-blue">
        {{ product.price | money }}
      </span>
    </div>
  </div>
</div>