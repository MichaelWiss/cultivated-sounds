{% comment %}
  Card Product Snippet
  - Ported from ProductCard.tsx
  - Uses Tailwind CSS
{% endcomment %}

<div class="group relative flex flex-col h-full border-r border-b border-vinyl-blue bg-vinyl-paper hover:bg-white transition-colors duration-300 p-4 sm:p-6 cursor-pointer">
  <a href="{{ product.url }}" class="absolute inset-0 z-0">
    <span class="sr-only">View {{ product.title }}</span>
  </a>

  {% comment %} Badges {% endcomment %}
  <div class="absolute top-4 left-4 z-10 flex flex-col gap-2 pointer-events-none">
    {% unless product.available %}
      <span class="bg-vinyl-black text-white text-[10px] font-mono uppercase px-2 py-1 tracking-widest border border-transparent shadow-sm">
        Sold Out
      </span>
    {% endunless %}
    {% if product.tags contains 'New' and product.available %}
      <span class="bg-vinyl-blue text-white text-[10px] font-mono uppercase px-2 py-1 tracking-widest rounded-full">
        New
      </span>
    {% endif %}
  </div>

  {% comment %} Image Container {% endcomment %}
  <div class="relative aspect-square w-full mb-6 overflow-hidden border border-gray-200 shadow-[4px_4px_0px_0px_rgba(26,35,219,0.1)] group-hover:shadow-[6px_6px_0px_0px_rgba(26,35,219,0.2)] transition-shadow duration-300">
    {% if product.featured_media %}
      <img 
        src="{{ product.featured_media | image_url: width: 600 }}" 
        alt="{{ product.featured_media.alt | escape }}" 
        width="{{ product.featured_media.width }}"
        height="{{ product.featured_media.height }}"
        loading="lazy"
        class="w-full h-full object-cover grayscale-[20%] group-hover:grayscale-0 group-hover:scale-105 transition-all duration-500 ease-out"
      />
    {% else %}
      {{ 'product-1' | placeholder_svg_tag: 'w-full h-full object-cover grayscale-[20%]' }}
    {% endif %}
    
    {% comment %} Quick Add Overlay (Visual Only for now) {% endcomment %}
    {% if product.available %}
      <div class="absolute inset-0 bg-vinyl-blue/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-center justify-center pointer-events-none">
        <span class="bg-vinyl-blue text-white font-mono text-xs uppercase px-6 py-3 rounded-full translate-y-4 group-hover:translate-y-0 transition-transform duration-300 hover:bg-vinyl-black">
          View Item
        </span>
      </div>
    {% endif %}
  </div>

  {% comment %} Details {% endcomment %}
  <div class="flex-1 flex flex-col items-center text-center space-y-2 pointer-events-none">
    <h3 class="font-sans text-xs uppercase tracking-wider text-gray-500">{{ product.vendor }}</h3>
    <h2 class="font-serif text-lg leading-tight italic group-hover:text-vinyl-blue transition-colors">{{ product.title }}</h2>
    {% comment %} Format could be a metafield or variant option {% endcomment %}
    <p class="font-sans text-xs text-gray-400 mt-1">{{ product.metafields.my_fields.format | default: 'Vinyl LP' }}</p>
    
    <div class="mt-auto pt-4 border-t border-gray-200 w-full">
      <span class="font-mono text-sm {% unless product.available %}text-gray-400 line-through{% else %}text-vinyl-black{% endunless %}">
        {{ product.price | money }}
      </span>
    </div>
  </div>
</div>